setup:
    addons:
        - plan: heroku-postgresql
          as: db
        - plan: cloudamqp
          as: rabbitmq
build:
    docker:
        web_backend: ./backend/Dockerfile
        celery: ./backend/Dockerfile
        celery-beat: ./backend/Dockerfile
        web_frontend: ./frontend/Dockerfile
run:
    web_backend: 
        command:
            - gunicorn base.wsgi
            - python3 manage.py runserver 0.0.0.0:8000
        image: web_backend   
    celery:  
        command:
            - celery -A base worker 
        image: celery
    celery-beat: 
        command: 
            - cellery -A base beat
        image: celery-beat
    web_frontend: 
        command:
            - npm start
        image: web_frontend
